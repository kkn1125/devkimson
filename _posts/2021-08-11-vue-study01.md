---
layout: post
date:   2021-08-11 13:05:25 +0900
title:  "[VUE] Vue를 파헤쳐 뷰자 01"
author: Kimson
categories: [ TIL, VUE ]
tags: [vue, frontend, start]
image: assets/images/post/covers/TIL-vue.png
description: "Vue 시작하기

Frontend의 3대 끝판왕이라 하더군요. 제가 아직 React나 Angular, Vue를 써본적이 없어 얼마나 좋은지 아직 상상도 안됩니다. 그래서 오늘부터 Vue를 병행 공부하며, 이후에는 Spring과 연동하여 프로젝트를 테스트 해보고자 합니다.

요즘에 Python이 자주 보여서 Python도 조금씩 시작하면서 포스팅하면 어떨까 합니다. 결국 하나를 파더라도 주변의 것들도 알아둬야 할 것 같다는 생각이 듭니다."
featured: false
hidden: false
rating: 4.5
toc: true
profile: false
istop: true
keysum: false
keywords: ''
---

# Vue 시작하기

Frontend의 3대 끝판왕이라 하더군요. 제가 아직 React나 Angular, Vue를 써본적이 없어 얼마나 좋은지 아직 상상도 안됩니다. 그래서 오늘부터 Vue를 병행 공부하며, 이후에는 Spring과 연동하여 프로젝트를 테스트 해보고자 합니다.

요즘에 Python이 자주 보여서 Python도 조금씩 시작하면서 포스팅하면 어떨까 합니다. 결국 하나를 파더라도 주변의 것들도 알아둬야 할 것 같다는 생각이 듭니다.

## CDN 사용

대부분 코드 예제는 [Vue 입문서][vue]{:target="_blank"}의 내용을 빌렸습니다.

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Vue.js Sample</title>
  </head>
  <body>
    <div id="app">
      {{ message }}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
      new Vue({
        el: "#app",
        data: {
          message: "Hello Vue.js!"
        }
      });
    </script>
  </body>
</html>
```

뭔가 Liquid와 닮아있으면서 js로 내용을 조정하는 모양새입니다. 여기서 제가 평소 쓰던 javascript와 달리 Vue라는 생성자 함수를 이용해서 ajax의 data를 보내듯 el이라는 프로퍼티에 태그 아이디를 부여하고 `{ { foo } }`부분을 정의하여 출력하게 됩니다.

## Vue Instance 생성자

```javascript
new Vue({
    // instance option properties
});

new Vue({
    template: "",
    el: "",
    methods: {}
    // 이외 life cycle hook 등이 있다고 합니다.
})
```

Vue Instance 라이프싸이클 초기화는 아래와 같습니다.

- 데이터 관찰
- 템플릿 컴파일
- DOM에 객체 연결
- 데이터 변경시 DOM Update

초기화 외에도 의도대로 커스텀 로직을 추가 할 수 있습니다.

```javascript
new Vue({
  data: {
    a: 1
  },
  created: function() {
    // this 는 vm 을 가리킴
    console.log("a is: " + this.a);
  }
});
```

`created` 이외에 lifecycle단계에 따라 `mounted`, `updated`, `destroyed`등을 사용 할 수 있고, lifecycle 초기화 메서드로 커스텀 로직을 수행하기 때문에 뷰에서는 따로 Controller를 갖고 있지 않다고 합니다.

## Vue Components

이 부분은 마치 jsp tiles와 비슷한 개념으로 이해했습니다. 화면을 단위별로 쪼개어서 해당 부분에 컴포넌트를 추가하는 등의 관리를 합니다.

```html
<div id="test">
    <kimson></kimson>
    <kimson></kimson>
    <!--
        하나의 대상에 같은 컴포넌트 사용 가능합니다.
    -->
</div>
<!--
    아래에서는 안됩니다.
    class로도 적용이 됩니다.
    하지만 대상이 둘이면 하나에만 적용 됩니다
-->
<div id="toast"> 
    <kimson></kimson>
</div>
```

```javascript
new Vue({
    // 대상을 벗어나 사용하면 컴포넌트 등록한게 맞냐고
    // 에러 메세지가 친절하게 지적해줍니다.
    el: "#test", // 컴포넌트 유효 대상
    // 컴포넌트 등록코드
    components: {
        "kimson":{
            template: "<div>Good job!!</div>"
            // 태그가 없이 문자만 있으면 오류가 납니다.
        }
    }
})
```

### Global/Local Component

전역 컴포넌트 설정입니다.

```javascript
Vue.component('kimson-global',{ // 전역 컴포넌트
    template: "<div>hello kimson</div>"
    // , ... 등등
});

new Vue({ // 인스턴스 #1
    el: "#app1"
})

new Vue({ // 인스턴스 #2
    el: "#app2"
})
```

여기서 전역 컴포넌트가 헷갈렸는데요. `Vue.component`메서드로 컴포넌트(태그)명을 주고, `template`에 내용을 적는(태그포함)것으로 컴포넌트를 정의합니다.

이때 `new Vue`로 인스턴스를 만들어 다른 `el`(타겟)에도 사용 가능하게 한다는 의미에서 전역입니다.

> 공통으로 여러 인스턴스에 사용 가능

지역 컴포넌트 설정입니다.

```javascript
let comp = { // 변수로 template을 따로 설정 한 경우
    template: "<b>kimson bold</b>"
}

new Vue({
    // 사용할때는 el: "타겟 id || class", 추가
    components: {
        '컴포넌트 명': comp
    }
})
```

## 부모 자식 컴포넌트 관계

> 자식은 부모에 이벤트를 올리고(event emit), 부모는 자식에게 데이터(props)를 내린다.

### Props

프롭스라 하며, 부모 컴포넌트에서 자식 컴포넌트로 내리는 데이터 속성을 의미합니다. 이런 이유는 모든 컴포넌트가 각 컴포넌트 자체 스코프를 갖고 있어 다른 컴포넌트 값을 참조할 수 없기 때문입니다.

즉, 데이터를 해당 스코프에 따라 보호 가능합니다.

옆집 철수네 아버지가 우리 집에와서 철수의 생일선물을 저에게 주는 것을 방지하는 것 같습니다. (?????)

```html
<div id="app">
    <child v-bind:foo="bar"></child>
</div>
```

```javascript
let test = {
    props: ["foo"],
    template: "<b>{ { foo } }</b>"
}

new Vue({
    el: "#app",
    data: {
        bar: "<b>test props</b>"
    },
    components: {
        "child": test
    }
});
// 위와 아래의 문법은 같은 결과입니다.
new Vue({
    el: "#app",
    data: {
        bar: "<b>test props</b>"
    },
    components: {
        "child": {
            props: ["foo"],
            template: "<b>{ { foo } }</b>"
        }
    }
});
```

여기서 `props` 이름은 `v-bind`와 같아야합니다. 변수이름 처럼 사용되며 `v-bind:foo="bar"`에서 bar는 부모가 뿌리는 `data`의 `bar`프로퍼티의 `value`값 입니다.

## v-if/for 문

```html
<div id="app1">
    <a href="#" v-if="seen">안녕 나는 링크야</a>
</div>

<div id="app2">
    <ol>
        <li v-for="data in dataList">{{data.text}}</li>
    </ol>
</div>

<script>
    // v-if 속성이 달려있는 태그 자체가 적용
    new Vue({
        el:'#app1',
        data: {
            seen: true
        }
    })
    // v-for 속성이 달려있는 태그 자체가 반복
    new Vue({
        el:'#app2',
        data: {
            dataList: [
                {text: "test1"},
                {text: "test2"},
                {text: "memo1"},
                {text: "memo2"}
            ]
        }
    })
</script>
```

심지어 신기하게도 콘솔에서 `app2.dataList.push({text:'테스트내용'});`이라고 입력하면 dataList가 추가됨과 동시에 화면에도 반영되어 다시 목록이 나오게 된다.

## v-on

```html
<div id="app3">
    <p>{{msg}}</p>
    <button v-on:click="reverse">
        메세지 뒤집기
    </button>
</div>

<script>
    var app5 = new Vue({
        el: '#app3',
        data: {
            msg: '안녕 테스트용이야'
        },
        methods: {
            reverse: function(){
                this.msg = this.msg.split('').reverse().join('')
            }
        }
    })
</script>
```

`methods`에서 그나마 친숙한 메서드를 보는게 참 반가웠습니다. `onclick`과 마찬가지로 함수명을 적게 되고, 함수 정의는 `Vue`인스턴스에서 `methods`프로퍼티에 정의하면 해당 메서드를 사용가능하게 합니다.

아직 내용이 많이 헷갈리고 어떻게 써야할 지 잘 모르겠습니다. Vue로 이제까지 만들었던 것들을 만들면서 익숙해지고자 합니다.

좀 더 심도있게 발전시켜서 'Vue를 어떻게 쓰는지는 아는구나?'라는 말을 들을 정도로 열심히 해보겠습니다.

-----

[vue]:https://joshua1988.github.io/web-development/vuejs/vuejs-tutorial-for-beginner/ '뷰 기초'