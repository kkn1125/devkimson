I"?!<h1 id="jest-사용하기">Jest 사용하기</h1>

<p>오늘 올렸던 <a href="{{site.baseurl}}/java-tdd01" target="_blank">[JAVA] TDD를 알아보자</a>과 관련한 툴의 하나인데요. <code class="language-plaintext highlighter-rouge">node</code>가 설치되어 있어야 사용할 수 있습니다.</p>

<p>자주 보던 유튜브 채널에 <code class="language-plaintext highlighter-rouge">TDD</code>와 어떻게 테스트 코드를 구현하는지에 대한 내용을 보고 따라하면서 기록으로 남기게 되었습니다.</p>

<h2 id="설치-및-설정">설치 및 설정</h2>

<blockquote>
  <p>실행 IDE는 vscode입니다.</p>
</blockquote>

<h3 id="설치">설치</h3>

<ol>
  <li>우선 <code class="language-plaintext highlighter-rouge">node.js</code>를 설치해주셔야 합니다.</li>
  <li><code class="language-plaintext highlighter-rouge">bash</code> 혹은 <code class="language-plaintext highlighter-rouge">vscode</code>의 터미널을 열고</li>
  <li>$ <code class="language-plaintext highlighter-rouge">npm init -y</code> 입력 후 <code class="language-plaintext highlighter-rouge">package.json</code>이 생기는지 봅니다.</li>
  <li><code class="language-plaintext highlighter-rouge">package.json</code>이 생겼다면</li>
  <li>$ <code class="language-plaintext highlighter-rouge">npm install --save-dev jest</code> 를 입력하여 jest를 설치합니다.</li>
</ol>

<h3 id="설정">설정</h3>

<p><code class="language-plaintext highlighter-rouge">npm init -y</code>를 입력하면 아래처럼 <code class="language-plaintext highlighter-rouge">package.json</code>이 생깁니다.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"main"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main.js"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"echo </span><span class="se">\"</span><span class="s2">Error: no test specified</span><span class="se">\"</span><span class="s2"> &amp;&amp; exit 1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"keywords"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISC"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">npm install --save-dev jest</code> 입력 후 아래와 같이 내용이 바뀌게 됩니다. 이때 <code class="language-plaintext highlighter-rouge">scripts</code>의 <code class="language-plaintext highlighter-rouge">test</code>에 <code class="language-plaintext highlighter-rouge">jest</code>라고 입력 합니다.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"main"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main.js"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jest"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"keywords"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISC"</span><span class="p">,</span><span class="w">

  </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"jest"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^27.4.5"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>위와 같이 <code class="language-plaintext highlighter-rouge">author</code>와 <code class="language-plaintext highlighter-rouge">devDependencies</code>가 생기고, <code class="language-plaintext highlighter-rouge">scripts</code>의 <code class="language-plaintext highlighter-rouge">test</code>의 값에는 <code class="language-plaintext highlighter-rouge">jest</code>라고 바꿔줍니다.</p>

<p>그렇게 수정이 끝나면 테스트 실행은 터미널에서 <code class="language-plaintext highlighter-rouge">npm test</code>라고 하면 <code class="language-plaintext highlighter-rouge">scripts</code>의 <code class="language-plaintext highlighter-rouge">test</code> 값을 실행하게 됩니다.</p>

<p><code class="language-plaintext highlighter-rouge">jest</code>가 실행되면 초기에는 아무런 테스트코드를 쓰지 않았기 때문에 <code class="language-plaintext highlighter-rouge">fail</code>이 뜹니다.</p>

<h2 id="간단한-테스트">간단한 테스트</h2>

<p>예를 들어 계산기를 만들어야 한다고 가정해봅시다.</p>

<p>기능은 더하기, 빼기, 나누기, 곱하기로 생각하고 더하기부터 코드를 작성합니다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c1">// sum.js</span>
<span class="kd">function</span> <span class="nx">sum</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">sum</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>이때 <code class="language-plaintext highlighter-rouge">sum.js</code>에는 <code class="language-plaintext highlighter-rouge">sum</code>함수가 자리하고 있습니다.</p>

<hr />

<p>📚 함께 보면 좋은 내용</p>

<p><a href="https://agilemanifesto.org/" target="_blank">Agile Manifesto(애자일 선언문)</a></p>
:ET