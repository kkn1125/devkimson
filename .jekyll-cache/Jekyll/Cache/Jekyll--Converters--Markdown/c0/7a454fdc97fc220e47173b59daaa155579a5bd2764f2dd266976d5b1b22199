I"<h1 id="heroku-war-deploy">Heroku war deploy</h1>

<p><code class="language-plaintext highlighter-rouge">heroku</code>를 처음 접했을 때 많이 어려움을 겪었습니다. 도대체 에러를 어디서 보여주는지 몰랐고 로그조차 찾기 힘들었기에 감으로 배포하면서 에러도 감으로 고치고는 했습니다. 그런데 최근에 다시 보니 로그를 보는 기능이 이미 있었네요 😥</p>

<p><code class="language-plaintext highlighter-rouge">heroku</code>에 <code class="language-plaintext highlighter-rouge">spring mvc</code>를 배포할 때는 아래와 같이 합니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span>heroku login

<span class="nv">$ </span>heroku plugins:install java <span class="o">(</span>처음 설치했을 때<span class="o">)</span>
<span class="nv">$ </span>heroku plugins:install heroku-cli-deploy <span class="o">(</span>처음 설치했을 때<span class="o">)</span>

<span class="nv">$ </span>heroku war:deploy blah.war <span class="nt">--app</span> blah
<span class="nv">$ </span>heroku open <span class="nt">-a</span> blah
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">blah</code>는 헤로쿠에 등록된 프로젝트 명입니다. 저 방법 말고도 많이 있습니다만 이 방법이 편합니다. 어제는 헤로쿠 자체에서 문제가 발생해 굉장히 느렸습니다. 새벽 즈음에 문제 발견하고 개발자들이 해결하고 있었습니다. 여하튼 배포방법은 간단한데 헤로쿠 페이지를 열었더니 404가 발생합니다.</p>

<h2 id="heroku-open-404">Heroku open 404</h2>

<p>에러 없이 로그에서 <code class="language-plaintext highlighter-rouge">404</code>만 뱉어내니 너무 답답했습니다. 대충 머리를 스치는 에러 상황은 이랬습니다.</p>

<ol>
  <li>혼용한 <code class="language-plaintext highlighter-rouge">vue</code>에 문제가 있나? → 네, 결론은 없었습니다.</li>
  <li>데이터베이스 연결이 잘못 되었나? → 데이터베이스는 로컬에서도 잘 작동되는 것을 보니 없는 것으로</li>
  <li>baseurl이 잘못 되었나? → &#8220;/&#8221;라 별 문제는 없었습니다.</li>
  <li>리소스경로? → 문제없음</li>
  <li>필터문제? → 없음</li>
  <li>ServletConfig? → &#8230;</li>
  <li>&#8230;?????</li>
</ol>

<p>여러 이유로 404가 발생하겠지만 모든 파일을 뒤져봐도 에러 날만한게 없었습니다.</p>

<h2 id="maven-clean">Maven clean</h2>

<p>진짜 설마설마 해서 계속 빌드하면서 걸렸던게 다른 프로젝트 빌드된 파일과 비교했을 때 이상한 점이 눈에 띄었습니다. 파일의 수야 내용물이 다르겠거니 했지만 정작 있어야할 것들이 없거나 했습니다.</p>

<p>이클립스를 사용하신다면 <code class="language-plaintext highlighter-rouge">run as</code>에 <code class="language-plaintext highlighter-rouge">maven clean</code>이 있습니다. 예전에는 모르고 그냥 사용했었는데요. <code class="language-plaintext highlighter-rouge">clean</code>은 <code class="language-plaintext highlighter-rouge">maven</code>의 라이프사이클 페이즈 중 하나이고, <code class="language-plaintext highlighter-rouge">target</code>폴더에 생성되었던 이전 빌드에서 생성된 모든 파일을 제거해줍니다.</p>

<p><code class="language-plaintext highlighter-rouge">clean</code>후 다시 <code class="language-plaintext highlighter-rouge">build</code>했더니 정상 작동 합니다&#8230; 😐</p>
:ET